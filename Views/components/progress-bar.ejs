<div class="card" id="progress" style="box-shadow: 0px 8px 24px 0px rgba(0, 0, 0, 0.25);">
    <div class="card-body">
        <div class="stepper-wrapper">
            <div class="stepper-item active" id="step1">
                <div class="step-counter">1</div>
                <div class="step-name mt-1">1.ทำการจองเสร็จ,รอหัวหน้าอนุมัติ</div>
                <div class="step-name option1">ผู้จอง: <%= booking.userinfo %>
                </div>
                <span id="step1-time" class="step-time">เวลาจอง: <%= new
                        Date(booking.booking_Time).toLocaleString('th-TH') %>
                </span>
            </div>
            <div class="stepper-item" id="step2">
                <div class="step-counter">2</div>
                <div class="step-name mt-1">2.หัวหน้างานอนุมัติ,รอคนจัดรถ</div>
                <div class="step-name option1">ผู้อนุมัติ: <%= booking.approverName %>
                </div>
                <span id="step2-time" class="step-time">เวลาอนุมัติ: <%= booking.approve_Time? new
                        Date(booking.approve_Time).toLocaleString('th-TH') :''%></span>
            </div>
            <div class="stepper-item" id="step3">
                <div class="step-counter">3</div>
                <div class="step-name mt-1">3.จัดรถสำเร็จ,พร้อมใช้งาน</div>
                <div class="step-name option1">ผู้จัดรถ: <%= booking.adminName %>
                </div>
                <span id="step3-time" class="step-time">เวลาจัดรถสำเร็จ: <%=booking.carArrange_Time? new
                        Date(booking.carArrange_Time).toLocaleString('th-TH'):"" %></span>
            </div>
            <div class="stepper-item" id="step4">
                <div class="step-counter">4</div>
                <div class="step-name mt-1">4.บันทึกเลขไมล์,เสร็จสิ้น</div>
                <div class="step-name option1">
                    ผู้จอง:
                    <% if (booking.status===4) { %>
                        <%= booking.adminName %>
                            <% } %>
                </div>
                <span id="step4-time" class="step-time">เวลาบันทึกเลขไมล์: <%= booking.completion_Time? new
                        Date(booking.completion_Time).toLocaleString('th-TH'):"" %></span>
            </div>
        </div>
    </div>
</div>

<script>
    // Function to update time
    function updateTime(elementId) {
        const now = new Date();
        const timeString = now.toLocaleString(); // Customize this according to your requirement
        document.getElementById(elementId).textContent = timeString;
    }

    // Function to update time for a specific step
    function updateStepTime(stepId, timeElementId) {
        updateTime(timeElementId);
        // You can also send the updated time to the server here for persistent storage if needed
    }

    // Attach event listeners to the action buttons for each step
    document.getElementById('actionButtonStep1').addEventListener('click', function () {
        updateStepTime('step1', 'step1-time');
    });

    document.getElementById('actionButtonStep2').addEventListener('click', function () {
        updateStepTime('step2', 'step2-time');
    });

    document.getElementById('actionButtonStep3').addEventListener('click', function () {
        updateStepTime('step3', 'step3-time');
    });
</script>